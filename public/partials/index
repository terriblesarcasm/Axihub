<div class="background">
  <div class="container">
    <div class="app">
      <div class="top">
        <h2>{{ user.name }}'s Smart Feed</h2>    
        <a ng-href="account"><button class="btn btn-primary">Accounts</button></a>
        <button class="btn btn-success" ng-click="getSmartFeed()" >Get Your Feed</button>
        <button class="btn btn-primary" ng-click="isCollapsed = !isCollapsed">Filter</button>
        <div class='search' collapse="isCollapsed">
          <div class='input-group'>
            <div class='input-group-btn'>
              <button type="button" class='btn btn-default dropdown-toggle' data-toggle="dropdown">{{ search.display }} <span class="caret"></span></button>
              <ul class="dropdown-menu">
                <li ng-repeat="choice in dropdown">
                  <a ng-click="search.param=choice.param; search.display=choice.display; search.placeholder=choice.placeholder">{{choice.display}}</a>
                </li>
              </ul>
            </div> <!-- /btn-group -->
            <input ng-model='search.term[search.param]' placeholder='{{search.placeholder}}' name='anim' class='my-input form-control'>
          </div> <!-- /input-group -->
        </div>
        <h4>
          Hello, {{ user.name }}!
        </h4>
      </div>
      <div class='smartfeed' ng-if='Smart.feed'>
        <div class="post" ng-animate="'animate'" ng-repeat="post in Smart.feed | orderBy:ordervar:true | filter:search.term" ng-if="post">
          <div class='twitter-post' ng-if="post.axihubprovider=='twitter.com'">
            <div ng-if="post.retweeted_status">
              <div class='context'>
                <div class='retweet-icon'>
                </div>
                <div class='twitt-profile-pic' ng-if="post.retweeted_status.user.profile_image_url">
                  <center><img class='img-rounded profile-image' ng-src="{{post.retweeted_status.user.profile_image_url}}"></center>
                </div>
              </div>

              <div class='content'>
                <div class='retweet-body'>
                  <p class='retweet muted'><small>Retweeted by: {{post.user.name}} <a ng-href="//www.twitter.com/{{post.user.screen_name}}">@{{post.user.screen_name}}</a></small></p>
                </div>
                <div class='tweet-body'>
                  <p class='item-header'><strong>{{post.retweeted_status.user.name}}</strong> <a ng-href="//www.twitter.com/{{post.retweeted_status.screen_name}}">@{{post.retweeted_status.user.screen_name}}</a></p>

                  <div ng-if="post.retweeted_status.text">
                    {{ post.retweeted_status.text }}
                  </div>

                  <div ng-if="post.retweeted_status.entities.media[0]">
                    <img class="img-responsive" ng-src="{{post.retweeted_status.entities.media[0].media_url}}">
                  </div>
                  <footer>
                    <p class='muted time'><small>{{ post.axihubtime | dateFilter }}</small></p>
                  </footer>
                </div>
              </div>
            </div>

            <div ng-if="post.axihubprovider=='twitter.com' && !post.retweeted_status">
              <div class="context">
                <center><img class='img-rounded twitter-profile-image' ng-src="{{post.user.profile_image_url}}"></center>
              </div>

              <div class="content">
                <div class='tweet-body'>
                  <p class='item-header'><strong>{{post.user.name}}</strong> <a class='user-link' ng-href="//www.twitter.com/{{post.user.screen_name}}">@{{post.user.screen_name}}</a></p>
                  
                   <div ng-if="post.text">
                    <p class="tweet-text">{{ post.text }}</p>
                  </div>
                  <footer>
                    <p class='muted time'><small>{{ post.axihubtime | dateFilter }}</small></p>
                  </footer>
                </div>
              </div>
            </div>
          </div>


          <div class='facebook-post' ng-if="post.axihubprovider=='facebook.com'">
            <div class='context'>
              <img class='img-rounded facebook-profile-image' ng-src='//graph.facebook.com/{{post.from.id}}/picture'>
            </div>

            <div class='content'>
              <a ng-href="//www.facebook.com/{{post.from.id}}">{{ post.from.name }}</a>
              <div ng-if="post">
                <a ng-href="{{ post.link }}"><img class="img-responsive" ng-src="{{ post.picture }}" /></a>
              </div>

              <div ng-if="post.message">
                <p class='facebook-message'>{{ post.message }}</p>
              </div>

              <footer>
                <p class='muted time'><small>{{ post.axihubtime | dateFilter }}</small></p>
              </footer>
            </div>
          </div>


          <div class='linkedin-post' ng-if='post.axihubprovider=="linkedin.com"'>
            <div ng-if="post.updateType=='JGRP'">
              <div class='context'>
                <img class='img-rounded linkedin-profile-image' ng-src='{{post.updateContent.person.pictureUrl}}'>
              </div>
              <div class='content'>
                <a ng-href="{{post.updateContent.person.siteStandardProfileRequest.url}}">{{ post.updateContent.person.firstName }} {{ post.updateContent.person.lastName }}</a> joined group <a ng-href="{{post.updateContent.memberGroups.values[0].siteGroupRequest.url}}"> {{ post.updateContent.memberGroups.values[0].name }}</a>
                <footer>
                  <p class='muted time'><small>{{ post.axihubtime | dateFilter }}</small></p>
                </footer>
              </div>
            </div>

            <div ng-if="post.updateType=='SHAR'">
              <div class='context'>
                <div class='linkedin-profile'>
                  <img class='img-rounded linkedin-profile-image' ng-src='{{post.updateContent.person.pictureUrl}}'>
                </div>
              </div>

              <div class='content'>
                <a ng-href="{{post.updateContent.person.siteStandardProfileRequest.url}}">{{ post.updateContent.person.firstName }} {{ post.updateContent.person.lastName }}</a> 
                <div class='comment'>
                  {{ post.updateContent.person.currentShare.comment }}
                </div>
                <footer>
                  <p class='muted time'><small>{{ post.axihubtime | dateFilter }}</small></p>
                </footer>
              </div>
            </div>

            <div ng-if="post.updateType=='MSFC'">
              <div class='context'>
                <img class='img-rounded linkedin-profile-image' ng-src='{{post.updateContent.companyPersonUpdate.person.pictureUrl}}'>
              </div>
              <div class='content'>
                <a ng-href="{{ post.updateContent.companyPersonUpdate.person.siteStandardProfileRequest.url}}">{{ post.updateContent.companyPersonUpdate.person.firstName }} {{ post.updateContent.companyPersonUpdate.person.lastName }}</a> started following {{ post.updateContent.company.name }}
                <footer>
                  <p class='muted time'><small>{{ post.axihubtime | dateFilter }}</small></p>              
                </footer>
              </div>
            </div>

            <div ng-if="post.updateType=='VIRL' && post.updateContent.updateAction.action.code == 'LIKE'">
              <div class='context'>
                <img class='img-rounded linkedin-profile-image' ng-src='{{ post.updateContent.person.pictureUrl }}'>
              </div>
              <div class='content'>
                <a ng-href="{{ post.updateContent.person.siteStandardProfileRequest.url }}">{{ post.updateContent.person.firstName }} {{ post.updateContent.person.lastName }}</a> likes:
                <div class='linkedin-originalUpdate'>
                  <div class='linkedin-originalUpdate-profile-img'>
                    <img ng-src='{{ post.updateContent.updateAction.originalUpdate.updateContent.person.pictureUrl }}'>
                  </div>
                  <div class='linkedin-originalUpdate-content'>
                    <a ng-href='{{ post.updateContent.updateAction.originalUpdate.updateContent.person.siteStandardProfileRequest.url'>{{ post.updateContent.updateAction.originalUpdate.updateContent.person.currentShare.author.firstName }} {{ post.updateContent.updateAction.originalUpdate.updateContent.person.currentShare.author.lastName }}</a> {{ post.updateContent.updateAction.originalUpdate.updateContent.currentShare.comment }}
                  </div>
              </div>
          </div>
          <div class="post-divider"></div>
        </div>
      </div>
    </div>
  </div>
</div>